const prompt = require('prompt-sync')();

const person = {
  name: '',
  email: '',
  phone: '',
};

const delivery = {
  delivery_price: 500,
  from: "вул.Січинського 25",
  to: '',
};

const order = {
  ...person,
  ...delivery,
  dishes: [],
  finalPrice: '',
  status: 'В обробці',
};

chooseRole();

function chooseRole() {
  let enterAs;

  do {
    enterAs = prompt('Оберіть 1 -- вхід для користувача, 2 -- вхід для адміністратора, 3 -- вийти з програми: ');

    if (enterAs === '1') {
      Usermain();
    } else if (enterAs === '2') {
      adminMain();
    } else if (enterAs === '3') {
      console.log('Гарного дня');
    } else {
      console.log('Невірний вибір. Будь ласка, оберіть 1, 2 або 3.');
    }
  } while (enterAs !== '3');
}

function Usermain() {
  const menu = [
    // ... (залиште меню без змін)
  ];

  function chooseDishes() {
    let userInputdish;
    let words;
    let anotherOrder = '1';
    do {
      userInputdish = prompt('Оберіть ID вашого замовлення. Для декількох замовлень введіть ID через пробіл. Щоб обрати одне блюдо декілька разів, просто введіть ID більше одного разу: ');
      words = userInputdish.split(' ');

      for (const word of words) {
        let found = false;

        for (const item of menu) {
          if (item.ID === word) {
            console.log(`Ви замовили ${item.title}`);
            order.dishes.push(item);
            found = true;
          }
        }

        if (!found) {
          console.log(`Помилка: товар з ID ${word} не знайдений у меню.`);
        }
      }
      anotherOrder = prompt('Бажаєте додати ще страви до замовлення? Введіть 1 -- якщо так або 2 -- якщо ні ');
    } while (anotherOrder === '1');
  }

  function enterPersonalInfo() {
    const userInputName = prompt("Уведіть ваше прізвище та ім'я через пробіл: ");
    const userInputemail = prompt("Уведіть вашу електронну пошту: ");
    const userInputadress = prompt("Уведіть вашу адресу доставки: ");

    const [lastName, firstName] = userInputName.split(' ');
    person.name = `${firstName} ${lastName}`;
    person.email = userInputemail;
    delivery.to = userInputadress;
    let userInputNumber;
    do {
      userInputNumber = prompt("Уведіть ваш номер, наприклад (+3806546454: ");
    } while (userInputNumber.length !== 13 || userInputNumber[0] !== '+');

    person.phone = userInputNumber;
    Object.assign(order, person, delivery);
  }

  function pricecalculator() {
    let totalcost = 0;
    for (const dish of order.dishes) {
      totalcost += dish.price;
    }
    order.price = totalcost + delivery.delivery_price;
  }

  chooseDishes();
  enterPersonalInfo();
  pricecalculator();
  showOrderSummary();
}

function showOrderSummary() {
  // ... (залиште цю функцію без змін)
}

function adminMain() {
  function appealToAdministrator() {
    let chooseaction;

    do {
      chooseaction = prompt('Якщо бажаєте переглянути замовлення нажміть -- 1, якщо бажаєте змінити статус замовлення -- 2: ');

      if (chooseaction == '1') {
        showOrderSummary();
      }
      if (chooseaction == '2') {
        changeOrderStatus();
      }
    } while (chooseaction !== '3');
  }

  function changeOrderStatus() {
    let newStatus;
    do {
      newStatus = prompt("Обновіть статус замовлення: 1 -- замовлення готується, 2 -- замовлення в дорозі, 3 -- замовлення доставлено, 4 -- схоже щось пішло не так, 5 -- нічого не міняти: ");

      if (newStatus === '1') {
        order.status = 'замовлення готується';
      }
      if (newStatus === '2') {
        order.status = 'замовлення в дорозі';
      }
      if (newStatus === '3') {
        order.status = 'замовлення доставлено';
      }
      if (newStatus === '4') {
        order.status = 'схоже щось пішло не так';
      }
    } while (newStatus !== '5');
    console.log('Теперішній статус замовлення: ' + order.status);
  }

  appealToAdministrator();
}
